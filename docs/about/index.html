<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Hugo 0.79.1" />
  <link rel="stylesheet" href="https://zackzhu123.github.io/ICE-engine/css/normalize.css">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  
  
  
  <link rel="stylesheet" href="https://zackzhu123.github.io/ICE-engine/css/cayman.ea0e967413f3851071cc8ace3621bc4205fe8fa79b2abe3d7bf94ff2841f0d47.css">
  
  
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css" integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js" integrity="sha384-9Nhn55MVVN0/4OFx7EE5kpFBPsEMZxKTCnA+4fqDmg12eCTqGi6+BB2LjY8brQxJ" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>

  <title>About | Powered by Deep Learning</title>
</head>

<body>
  <section class="page-header">
  <h1 class="project-name">
    Engine Virtual Lab
  </h1>
  <h2 class="project-tagline">
    An Deep-Learning Powerd Engine Simulation Tool
  </h2>
  <nav>
    
    
      
      
      
      
      <a href="/ICE-engine/" class="btn">Home</a>
    
      
      
      
      
      <a href="/ICE-engine/lab/" class="btn">Lab</a>
    
  </nav>
</section>

  <section class="main-content">
    
  <h1>About</h1>
  <h2 id="the-background">The Background</h2>
<p><img src="https://raw.githubusercontent.com/ex172000/lab-web/master/docs/panel.png" alt="Panel"></p>
<p>An internal combustion engine (ICE) is a heat engine in which the combustion of a fuel occurs with an oxidizer (usually air) in a combustion chamber that is an integral part of the working fluid flow circuit. In an internal combustion engine, the expansion of the high-temperature and high-pressure gases produced by combustion applies direct force to some component of the engine. The force is applied typically to pistons, turbine blades, rotor or a nozzle. This force moves the component over a distance, transforming chemical energy into useful work. This replaced the external combustion engine for applications where weight or size of the engine is important.</p>
<p>In the actual lab, we have conducted the experiment with the following inputs:</p>
<ul>
<li>Torque</li>
<li>Throttle Position</li>
</ul>
<p>, and Obtained the outputs:</p>
<ul>
<li>Air Flow Rate</li>
<li>Engine Speed</li>
<li>Fuel Flow Rate</li>
</ul>
<p>The sample data is like the following:</p>
<table>
<thead>
<tr>
<th>Barometric Pressure (mBar)</th>
<th>Inlet Pressure (kPa)</th>
<th>Air Flow Pressure (Pa)</th>
<th>Oil Pressure (Bar)</th>
<th>Fuel Pressure (Bar)</th>
<th>Throttle Position (%)</th>
<th>Torque (Nm)</th>
<th>Engine Speed (rpm)</th>
<th>Fuel Flow Rate (cm^3/min)</th>
<th>Air Temp. (C)</th>
<th>Fuel Temp. (C)</th>
<th>Oil Out Temp. (C)</th>
<th>Exhaust Temp. (C)</th>
<th>Plant In Temp. (C)</th>
<th>Cool In Temp. (C)</th>
<th>Cool Out Temp. (C)</th>
<th>Dyno Out Temp. (C)</th>
<th>Oil In Temp. (C)</th>
<th>Cal Water In Temp. (C)</th>
<th>Cal Water Out Temp. (C)</th>
<th>Cal Exhaust In Temp. (C)</th>
<th>Cal Exhaust Out Temp. (C)</th>
</tr>
</thead>
<tbody>
<tr>
<td>994.97</td>
<td>101.02</td>
<td>221.71</td>
<td>4.34</td>
<td>2.53</td>
<td>14.42</td>
<td>24.12</td>
<td>1237.64</td>
<td>0.26</td>
<td>22.25</td>
<td>23.11</td>
<td>40.75</td>
<td>162.39</td>
<td>16.94</td>
<td>44.24</td>
<td>43.25</td>
<td>17.37</td>
<td>42.83</td>
<td>17.20</td>
<td>20.54</td>
<td>77.60</td>
<td>19.47</td>
</tr>
<tr>
<td>995.07</td>
<td>99.04</td>
<td>276.61</td>
<td>4.39</td>
<td>2.48</td>
<td>14.62</td>
<td>24.12</td>
<td>1237.91</td>
<td>0.26</td>
<td>22.18</td>
<td>23.04</td>
<td>40.77</td>
<td>162.48</td>
<td>16.92</td>
<td>44.31</td>
<td>43.31</td>
<td>17.34</td>
<td>42.89</td>
<td>17.23</td>
<td>20.55</td>
<td>77.81</td>
<td>19.51</td>
</tr>
<tr>
<td>994.87</td>
<td>101.90</td>
<td>232.25</td>
<td>4.39</td>
<td>2.44</td>
<td>14.72</td>
<td>24.30</td>
<td>1238.12</td>
<td>0.26</td>
<td>22.14</td>
<td>23.03</td>
<td>40.86</td>
<td>162.60</td>
<td>16.91</td>
<td>44.45</td>
<td>43.45</td>
<td>17.36</td>
<td>42.97</td>
<td>17.27</td>
<td>20.57</td>
<td>78.07</td>
<td>19.56</td>
</tr>
<tr>
<td>995.48</td>
<td>99.14</td>
<td>320.80</td>
<td>4.39</td>
<td>2.53</td>
<td>14.77</td>
<td>24.27</td>
<td>1239.65</td>
<td>0.44</td>
<td>22.23</td>
<td>23.12</td>
<td>41.05</td>
<td>162.87</td>
<td>16.97</td>
<td>44.55</td>
<td>43.49</td>
<td>17.30</td>
<td>43.01</td>
<td>17.25</td>
<td>20.56</td>
<td>78.29</td>
<td>19.54</td>
</tr>
</tbody>
</table>
<h2 id="deep-learning-modeling">Deep Learning Modeling</h2>
<p>With the above data, we will construct the following deep learning model:</p>
<ul>
<li>128-node Dense layer, with ReLu activation</li>
<li>256-node Dense layer, with ReLu activation</li>
<li>64-node Dense layer, with ReLu activation</li>
<li>3-node Dense layer, for converting to the output</li>
</ul>
<p>The model is trained on Tensorflow(Python) with a Mean Absolute Error loss function and it obtained a Mean Square Error of 7.6440300941467285 after 5000 iterations.</p>
<h2 id="learning-the-noise">Learning the Noise</h2>
<p>With the above model, we successfully constructed the internal state of the engine, but one of the important item, noise, is missing from it. To construct the noise, we assume it&rsquo;s coming from the input(and also the feedback from the engine itself). We also assume the noise distribution is a Gussian distribution.</p>
<p>With the above two assumptions, we decided to get the noise with K-Means unsupervised learning algorithms. The algorithm can be found here: <a href="https://en.wikipedia.org/wiki/K-means_clustering">https://en.wikipedia.org/wiki/K-means_clustering</a></p>
<p>For us, we got the following data for two different engine types:</p>
<p><strong>Diesel</strong></p>
<p>Number of samples: 2034</p>
<p><img src="https://raw.githubusercontent.com/ex172000/lab-web/master/docs/diesel.png" alt="Diesel Engine Noise Inertia"></p>
<ul>
<li>Optimal Number of Classes: 17</li>
<li>Torque Sigma: 1.2506192871765371</li>
<li>Position Sigma:  0.8401700850752418</li>
</ul>
<p><strong>Petrol</strong></p>
<p>Number of samples: 1677</p>
<p><img src="https://raw.githubusercontent.com/ex172000/lab-web/master/docs/petrol.png" alt="Diesel Engine Noise Inertia"></p>
<ul>
<li>Optimal Number of Classes: 17</li>
<li>Torque Sigma: 0.39536827344266434</li>
<li>Position Sigma: 0.27096564078006163</li>
</ul>
<p>The optimal number of classes is got with with inertia ploting, and the finding of the &ldquo;knee&rdquo;. It is learnt with the package of <em>kneed</em></p>
<h2 id="serving-the-model-as-a-tool">Serving the Model as a Tool</h2>
<p>To serve the model on web, we have leveraged the following services/tools:</p>
<ul>
<li>Tensorflow JavaScript(TFJS) convertor</li>
<li>Hugo static webpage generator</li>
<li>GitHub Pages</li>
</ul>
<p>We firstly convert the model with the TFJS convertor</p>
<div class="highlight"><pre style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"> tensorflowjs_converter --input_format<span style="color:#666">=</span>keras ./lab.h5 ./petrol
</code></pre></div><p>This model is then served via an async function in the HTML/JavaScript</p>
<div class="highlight"><pre style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#008000;font-weight:bold">const</span> model <span style="color:#666">=</span> <span style="color:#008000;font-weight:bold">await</span> tf.loadLayersModel(<span style="color:#ba2121">&#39;https://raw.githubusercontent.com/zackzhu123/model.json&#39;</span>);
</code></pre></div><p>Then we use the loaded model inside the Hugo-generated page, which you can find in the <strong>Lab</strong> tab.</p>


    <footer class="site-footer">
  <span class="site-footer-credits">
    Xiner Zhu | Imperial College London - Mechanical Egnineering
  </span>
</footer>

  </section>
  
  

</body>
</html>
